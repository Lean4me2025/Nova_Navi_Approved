<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>NOVA — Intro (Diagnostic)</title>
  <style>
    body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
           margin:0; display:flex; align-items:center; justify-content:center; min-height:100vh; }
    .wrap { text-align:center; padding:24px; max-width:760px; }
    .title { font-size: clamp(28px, 4vw, 40px); margin-bottom: 12px; }
    .sub { color:#6b7280; margin-bottom: 24px; }
    .row { margin-top: 18px; display:flex; gap:12px; justify-content:center; flex-wrap:wrap; }
    .btn { font-size:18px; padding:14px 22px; border-radius:12px; border:0; cursor:pointer; background:#e5e7eb; }
    .log { margin-top:16px; font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace; font-size:13px; text-align:left; background:#f6f6f6; padding:12px; border-radius:8px; max-height:240px; overflow:auto; }
    audio { width: 100%; max-width: 520px; margin: 10px auto; display:block; }
    a.link { text-decoration:none; line-height:44px; }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="title">Welcome to NOVA (Diagnostic Mode)</div>
    <div class="sub">Tap Start. If audio fails, check the log below.</div>

    <audio id="introAudio" controls preload="auto">
      <source src="/assets/audio/intro.mp3" type="audio/mpeg" />
      Your browser does not support the audio element.
    </audio>

    <div class="row">
      <button id="startBtn" class="btn">Start</button>
      <a class="link" href="/traits.html">Skip →</a>
    </div>

    <div id="log" class="log"></div>
  </div>

  <script>
    const audio = document.getElementById('introAudio');
    const startBtn = document.getElementById('startBtn');
    const logEl = document.getElementById('log');
    const NEXT_URL = '/traits.html';

    function log(msg) {
      logEl.textContent += msg + "\n";
    }

    startBtn.addEventListener('click', async () => {
      log("Start button clicked.");
      try {
        await audio.play();
        log("Audio started successfully.");
        audio.onended = () => {
          log("Audio ended → navigating to traits.html");
          window.location.href = NEXT_URL;
        };
      } catch (e) {
        log("Audio play() error: " + e);
      }
    });

    audio.addEventListener('error', e => {
      log("Audio element error: " + JSON.stringify(e));
    });
  </script>
</body>
</html>
